<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quality Prompts</title>
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg">
    <script src="https://js.puter.com/v2/"></script>
</head>
<body>
    <h1>Quality Prompts</h1>
    <p class="subtitle">Transform simple ideas into production-ready prompts</p>

    <div id="file-protocol-warning" class="warning-banner hidden">
        <strong>Local file detected.</strong> The Puter API requires a web server. Run this from your project folder:
        <code>python3 -m http.server 8000</code> then open <a href="http://localhost:8000">http://localhost:8000</a>
    </div>

    <div class="container">
        <!-- Settings Panel -->
        <button id="settings-toggle" class="settings-toggle">&#9654; API Settings</button>
        <div id="settings-panel" class="settings-panel hidden">
            <div class="form-group">
                <label for="api-mode">API Provider</label>
                <select id="api-mode">
                    <option value="puter">Puter GPT-OSS (Free, no key required)</option>
                    <option value="chat">OpenAI Chat Completions</option>
                    <option value="responses">OpenAI Responses API</option>
                </select>
            </div>

            <div id="puter-settings">
                <div class="form-group">
                    <label for="puter-model">Model</label>
                    <select id="puter-model">
                        <option value="openai/gpt-oss-120b">gpt-oss-120b (Best quality)</option>
                        <option value="openai/gpt-oss-20b">gpt-oss-20b (Faster)</option>
                        <option value="openai/gpt-oss-20b:free">gpt-oss-20b:free</option>
                    </select>
                </div>
                <p class="settings-hint">Powered by Puter.com â€” free, no API key needed. Uses the user-pays model.</p>
            </div>

            <div id="openai-settings" class="hidden">
                <div class="form-group">
                    <label for="api-key">API Key</label>
                    <input type="password" id="api-key" placeholder="sk-...">
                </div>
                <div class="form-group">
                    <label for="base-url">Base URL (optional)</label>
                    <input type="text" id="base-url" placeholder="https://api.openai.com/v1">
                </div>
                <div class="form-group">
                    <label for="model-name">Model Name (optional)</label>
                    <input type="text" id="model-name" placeholder="gpt-4o">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="save-key">
                    <label for="save-key">Remember settings in this browser</label>
                </div>
                <p class="settings-hint">Note: The standard OpenAI API (api.openai.com) may not support direct browser requests due to CORS.</p>
            </div>
        </div>

        <hr class="section-divider">

        <!-- Input Section -->
        <div class="form-row">
            <div class="form-group">
                <label for="subject-type">Subject Type</label>
                <select id="subject-type"></select>
            </div>
            <div class="form-group">
                <label for="model-type">Target Model</label>
                <select id="model-type"></select>
            </div>
        </div>

        <div class="form-group">
            <label for="idea-input">Your Idea</label>
            <textarea id="idea-input" placeholder="Describe your idea, task, or concept... (e.g., &quot;Help me design a blockchain onboarding flow&quot;)" rows="3"></textarea>
        </div>

        <button id="generate-btn" class="btn-primary">Generate Prompt</button>

        <!-- Error -->
        <div id="error-section" class="error-message hidden"></div>

        <!-- Loading -->
        <div id="loading-section" class="loading-container hidden">
            <div class="spinner"></div>
            <div class="loading-text">Generating your prompt...</div>
            <div class="loading-status">Analyzing subject type, optimizing for target model</div>
        </div>

        <!-- Output -->
        <div id="output-section" class="output-section hidden">
            <hr class="section-divider">
            <h3>Generated Prompt</h3>

            <div class="tab-bar">
                <button class="tab-btn active" data-tab="plain">Plain Text</button>
                <button class="tab-btn" data-tab="structured">Structured</button>
                <button class="tab-btn" data-tab="json">JSON</button>
            </div>

            <!-- Plain Text Tab -->
            <div class="tab-panel active" data-tab="plain">
                <div id="plain-content" class="plain-text-output"></div>
                <div class="btn-row">
                    <button class="btn-small btn-copy" data-target="plain-content">Copy</button>
                    <button class="btn-small btn-download" data-target="plain-content" data-format="txt">Download .txt</button>
                </div>
            </div>

            <!-- Structured Tab -->
            <div class="tab-panel" data-tab="structured">
                <pre id="structured-content"></pre>
                <div class="btn-row">
                    <button class="btn-small btn-copy" data-target="structured-content">Copy</button>
                    <button class="btn-small btn-download" data-target="structured-content" data-format="txt">Download .txt</button>
                </div>
            </div>

            <!-- JSON Tab -->
            <div class="tab-panel" data-tab="json">
                <pre id="json-content"></pre>
                <div class="btn-row">
                    <button class="btn-small btn-copy" data-target="json-content">Copy</button>
                    <button class="btn-small btn-download" data-target="json-content" data-format="json">Download .json</button>
                </div>
            </div>

            <!-- Notes -->
            <div id="optimization-notes" class="optimization-notes hidden">
                <strong>Optimization Notes</strong>
                <span></span>
            </div>

            <div id="token-estimate" class="token-estimate hidden"></div>
        </div>
    </div>

    <footer class="license-section">
        <div class="license-badge">
            MIT License
            <div class="license-tooltip">
                MIT License<br><br>
                Copyright (c) 2025 Austin Harshberger<br><br>
                Permission is hereby granted, free of charge, to any person obtaining a copy
                of this software and associated documentation files (the "Software"), to deal
                in the Software without restriction, including without limitation the rights
                to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                copies of the Software, and to permit persons to whom the Software is
                furnished to do so, subject to the following conditions:<br><br>
                The above copyright notice and this permission notice shall be included in all
                copies or substantial portions of the Software.
            </div>
        </div>
        <div class="author-info">
            Created by Austin Harshberger
        </div>
    </footer>

    <script src="./js/promptEngine.js"></script>
    <script src="./js/apiClient.js"></script>
    <script src="./js/uiRenderer.js"></script>
    <script src="./js/app.js"></script>
</body>
</html>
